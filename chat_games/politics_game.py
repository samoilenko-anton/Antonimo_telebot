import json
from datetime import datetime
from telegram import Update
from telegram.ext import ContextTypes
import random

def get_message_by_score(score: int) -> str:
    if score == 100:
        return random.choice([
            "üî• –¢–∏ ‚Äî –ø–æ—Ä–æ—Ö–æ–±–æ—Ç ‚Ññ1! –¢–∏ –≤–∂–µ –ø–∞—Ç—Ä—É–ª—é—î—à —Ñ—Ä–æ–Ω—Ç –≤ Instagram.",
            "üí• –ê–±—Å–æ–ª—é—Ç–Ω–∏–π –ø–æ—Ä–æ—Ö–æ–±–æ—Ç-–º–æ–Ω—Å—Ç—Ä! –¢–µ–±–µ –∑–Ω–∞—é—Ç—å –Ω–∞–≤—ñ—Ç—å —É –ö—Ä–µ–º–ª—ñ.",
            "‚ö°Ô∏è –ü–æ—Ä–æ—Ö–æ–±–æ—Ç, —â–æ –∑–∞—Ä—è–¥–∂–∞—î –∫—Ä–∞—ó–Ω—É –Ω–∞ 100% ‚Äî –∑–∞–ª–∏—à–∞–π—Å—è —Ç–∞–∫–∏–º!"
        ])
    elif score >= 90:
        return random.choice([
            "üíô –¢–∏ –º–∞–π–∂–µ –Ω–∞ –ø–µ—Ä–µ–¥–æ–≤—ñ–π –≤ —Å–µ—Ä—Ü—ñ, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Å–∏–¥–∏—à –Ω–∞ –¥–∏–≤–∞–Ω—ñ.",
            "üî• –¢–≤—ñ–π –ø–∞—Ç—Ä—ñ–æ—Ç–∏–∑–º –≤—Ä–∞–∂–∞—î –±—ñ–ª—å—à–µ, –Ω—ñ–∂ –æ–±—Å—Ç—Ä—ñ–ª–∏ –≤–æ—Ä–æ–≥–∞.",
            "üí™ –¢–∏ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–æ—Ä–æ—Ö–æ–±–æ—Ç, —Ç–∏ ‚Äî –ª–µ–≥–µ–Ω–¥–∞ —Å–æ—Ü–º–µ—Ä–µ–∂!"
        ])
    elif score >= 75:
        return random.choice([
            "üî• –ü–æ—Ä–æ—Ö–æ–±–æ—Ç –∑ –±–æ—Ä—â–µ–º —É —Ä—É–∫–∞—Ö —ñ –ª–∞–π–∫–æ–º –Ω–∞ –¥–æ–ø–∏—Å—ñ.",
            "üíõ –¢–≤–æ—è —Å–ª–∞–≤–∞ —à–∏—Ä–∏—Ç—å—Å—è —à–≤–∏–¥—à–µ, –Ω—ñ–∂ –≤—ñ—Ä—É—Å —É —Å–æ—Ü–º–µ—Ä–µ–∂–∞—Ö.",
            "üëå –¢–∏ –ø–∞—Ç—Ä—ñ–æ—Ç –∑ –¥—É—à–µ—é —Ñ–∞–Ω–∞—Ç–∞ —ñ –≥—É–º–æ—Ä–æ–º —Ç—Ä–æ–ª—è."
        ])
    elif score >= 50:
        return random.choice([
            "üòé –¢–∏ —è–∫ –±–æ—Ä—â ‚Äî —Å–º–∞—á–Ω–∏–π, –∞–ª–µ –Ω–µ –Ω–∞–¥—Ç–æ –≥–æ—Å—Ç—Ä–∏–π.",
            "ü§° –ü–æ—Ä–æ—Ö–æ–±–æ—Ç –Ω–∞ –ø—ñ–≤—Å—Ç–∞–≤–∫–∏: —ñ–Ω–æ–¥—ñ –∫—Ä–∏—á–∏—à '–°–ª–∞–≤–∞!' —ñ–Ω–æ–¥—ñ —Å–ø–∏—à.",
            "üôÉ –¢–∏ –≤ –∫—É—Ä—Å—ñ, —â–æ —Ä–æ–±–∏—Ç—å—Å—è, –∞–ª–µ —ñ–Ω–æ–¥—ñ –ø—Ä–æ—Å—Ç–æ –ª–∞–π–∫–∞—î—à –º–µ–º–∏."
        ])
    elif score >= 30:
        return random.choice([
            "ü§î –õ–µ–¥–≤–µ –ø–æ—Ä–æ—Ö–æ–±–æ—Ç, –∞–ª–µ –¥—É—Ö —É —Ç–µ–±–µ —î. –í–¥—è—á–Ω—ñ —Ç–æ–±—ñ –∑–∞ —Ü–µ!",
            "üòÖ –ü–æ—Ä–æ—Ö–æ–±–æ—Ç-–ª—é–±–∏—Ç–µ–ª—å ‚Äî –∑'—è–≤–ª—è—î—à—Å—è —Ç—ñ–ª—å–∫–∏ –ø—ñ–¥ —á–∞—Å –≥–∞—Ä—è—á–∏—Ö –ø–æ—Å—Ç—ñ–≤.",
            "ü¶• –ü–æ—Ä–æ—Ö–æ–±–æ—Ç-—ñ–Ω–µ—Ä—Ç–Ω–∏–π: –∑ –≤–µ–ª–∏–∫–æ—é –ª—é–±–æ–≤‚Äô—é –¥–æ —Å–Ω—É —ñ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –µ–Ω–µ—Ä–≥—ñ—ó."
        ])
    elif score >= 10:
        return random.choice([
            "üò¥ –¢–∏ –ø–æ—Ä–æ—Ö–æ–±–æ—Ç –¥–ª—è –≥–∞–ª–æ—á–∫–∏ ‚Äî –Ω–∞–≤—ñ—Ç—å —Å–ø–∏—à, –∫–æ–ª–∏ —Ç—Ä–µ–±–∞ –∫—Ä–∏—á–∞—Ç–∏.",
            "üßü‚Äç‚ôÇÔ∏è –¢–∏ –ø–∞—Ç—Ä—ñ–æ—Ç, —è–∫–∏–π –ø—Ä–æ–∫–∏–¥–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—ñ–¥ –ø–µ—Ä–µ–º–æ–≥–∏ –ó–°–£.",
            "üò¨ –¢–≤—ñ–π –ø–æ—Ä–æ—Ö–æ–±–æ—Ç–∏–∑–º –Ω–∞ —Ä—ñ–≤–Ω—ñ \"–ª–∞–π–∫–Ω—É–≤ –∫–æ–ª–∏—Å—å —É 2014\"."
        ])
    else:
        return random.choice([
            "üòÇ –ü–æ—Ä–æ—Ö–æ–±–æ—Ç? –°–∫–æ—Ä—ñ—à–µ –≤–æ—Ä–æ–≥ –Ω–∞ –ø–∞—É–∑—ñ. –ê–ª–µ –±—É–¥–µ–º–æ –Ω–∞–¥—ñ—è—Ç–∏—Å—å!",
            "üôà –¢–∏ —É–Ω–∏–∫–∞—î—à —Ç–µ–º–∏, –∞–ª–µ —Ä–∞–Ω–æ —á–∏ –ø—ñ–∑–Ω–æ –ø—Ä–æ–∫–∏–Ω–µ—à—Å—è.",
            "ü§° –ù–∞–π–∫—Ä–∞—â–∏–π –≤ —Å–≤—ñ—Ç—ñ —Ç—Ä–æ–ª—å, —è–∫–∏–π –≥—Ä–∞—î —É –ø–æ—Ä–æ—Ö–æ–±–æ—Ç–∞."
        ])

async def porokhobot(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.effective_user.id
    chat_id = update.effective_chat.id
    today_str = datetime.now().strftime("%Y-%m-%d")
    
    seed_str = f"{chat_id}-{user_id}-{today_str}"
    random.seed(seed_str)

    score = random.randint(0, 100)
    message = get_message_by_score(score)

    await update.message.reply_text(f"üìù –†—ñ–≤–µ–Ω—å —Ç–≤–æ–≥–æ –ø–æ—Ä–æ—Ö–æ–±–æ—Ç—Å—Ç–≤–∞: {score}%\n{message}\n#–°–ª–∞–≤–∞–£–∫—Ä–∞—ó–Ω—ñ üá∫üá¶")
